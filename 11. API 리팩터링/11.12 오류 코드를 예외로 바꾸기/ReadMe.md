# 11. API 리팩터링
## 11.12 오류 코드를 예외로 바꾸기
```JS
if(data) 
  return new ShippingRules(data); 
else 
  return -23;

```
->
```JS
if (data) 
  return new ShippingRules(data); 
else 
  throw new OrderProcessingError(-23);
```

### 배경
예전에는 오류 코드를 사용하는게 보편적이었으나, 이 경우 오류 코드를 매번 검사해서 콜스택으로 전파하거나 직접 처리하는 처리가 필요하다.  
예외는 프로그래밍 언어에서 제공하는 독립적인 오류 처리 메커니즘이다.    
오류가 발견되면 예외를 던지고 적절한 예외 핸들러를 찾을 때까지 콜스택을 타고 위로 전파되어 오류 코드를 일일이 검사하지 않아도 되어 편리하다.

### 절차
1. 콜스택 상위에 해당 예외를 처리할 예외 핸들러를 작성한다.
2. 테스트한다.
3. 해당 오류코드를 대체할 예외와 그 밖의 예외를 구분할 식별 방법을 찾는다.
4. 정적 검사를 수행한다.
5. catch절을 수정하여 직접 처리할 수 있는 예외는 적절히 대처하고, 그렇지 않은 예외는 다시 던진다.
6. 테스트한다.
7. 오류코드를 반환하는 곳 모두에서 예외를 던지도록 수정한다. 하나씩 수정할 때마다 테스트한다.
8. 모두 수정했다면 그 오류 코드를 콜스택 위로 전달하는 코드를 모두 제거한다. 하나씩 수정할 때마다 테스트한다.
